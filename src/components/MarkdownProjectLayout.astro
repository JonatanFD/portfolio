---
import Footer from "./Footer.astro";
import Layout from "./Layout.astro";
import Tag from "./ui/Tag.astro";

interface Props {
    frontmatter: {
        title: string;
        description?: string;
        date?: string;
        tags?: string[];
        coverUrl?: string;
    };
}

const { frontmatter } = Astro.props;
---

<Layout>
    <article class="py-8 md:py-16">
        <!-- Back button -->
        <a
            href="/"
            class="inline-flex items-center gap-2 text-sm hover:underline mb-8"
        >
            ‚Üê Back to home
        </a>

        <!-- Header -->
        <header class="mb-8">
            {
                frontmatter.coverUrl && (
                    <img
                        src={frontmatter.coverUrl}
                        alt={frontmatter.title}
                        class="w-full rounded-lg mb-6"
                    />
                )
            }

            <h1
                class="scroll-m-20 text-2xl md:text-4xl font-semibold tracking-tight mb-4 text-zinc-100"
            >
                {frontmatter.title}
            </h1>

            {
                frontmatter.description && (
                    <p class="text-base md:text-lg text-zinc-400">
                        {frontmatter.description}
                    </p>
                )
            }

            {
                frontmatter.date && (
                    <time class="text-sm text-zinc-500 mt-2 block">
                        {new Date(frontmatter.date).toLocaleDateString(
                            "en-US",
                            {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            },
                        )}
                    </time>
                )
            }

            {
                frontmatter.tags && frontmatter.tags.length > 0 && (
                    <div class="flex flex-wrap gap-2 mt-4">
                        {frontmatter.tags.map((tag) => (
                            <Tag label={tag} />
                        ))}
                    </div>
                )
            }
        </header>

        <!-- Markdown Content -->
        <div class="prose prose-slate dark:prose-invert max-w-none">
            <slot />
        </div>

        <Footer />
    </article>
</Layout>

<style is:global>
    /* Markdown content styling */
    .prose {
        color: hsl(var(--foreground));
    }

    .prose h1 {
        font-size: 2.25rem;
        font-weight: 700;
        margin-top: 2rem;
        margin-bottom: 1rem;
        scroll-margin-top: 4rem;
    }

    .prose h2 {
        font-size: 1.875rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 1rem;
        scroll-margin-top: 4rem;
    }

    .prose h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        scroll-margin-top: 4rem;
    }

    .prose h4 {
        font-size: 1.25rem;
        font-weight: 600;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
    }

    .prose p {
        margin-top: 1rem;
        margin-bottom: 1rem;
        line-height: 1.75;
    }

    .prose a {
        color: hsl(var(--primary));
        text-decoration: underline;
        text-underline-offset: 2px;
    }

    .prose a:hover {
        text-decoration: none;
    }

    .prose strong {
        font-weight: 600;
    }

    .prose code {
        background-color: hsl(var(--muted));
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-size: 0.875em;
        font-family:
            ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
            "Liberation Mono", "Courier New", monospace;
    }

    .prose pre {
        background-color: hsl(var(--muted));
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin-top: 1rem;
        margin-bottom: 1rem;
    }

    .prose pre code {
        background-color: transparent;
        padding: 0;
        border-radius: 0;
        font-size: 0.875rem;
    }

    .prose ul,
    .prose ol {
        margin-top: 1rem;
        margin-bottom: 1rem;
        padding-left: 1.5rem;
    }

    .prose li {
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .prose blockquote {
        border-left: 4px solid hsl(var(--primary));
        padding-left: 1rem;
        font-style: italic;
        margin-top: 1rem;
        margin-bottom: 1rem;
        color: hsl(var(--muted-foreground));
    }

    .prose img {
        border-radius: 0.5rem;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .prose hr {
        border: none;
        border-top: 1px solid hsl(var(--border));
        margin-top: 2rem;
        margin-bottom: 2rem;
    }

    .prose table {
        width: 100%;
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
        border-collapse: collapse;
    }

    .prose th {
        background-color: hsl(var(--muted));
        padding: 0.75rem;
        text-align: left;
        font-weight: 600;
        border: 1px solid hsl(var(--border));
    }

    .prose td {
        padding: 0.75rem;
        border: 1px solid hsl(var(--border));
    }

    /* Responsive styles for mobile */
    @media (max-width: 768px) {
        .prose h1 {
            font-size: 1.5rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .prose h2 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .prose h3 {
            font-size: 1.125rem;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .prose h4 {
            font-size: 1rem;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .prose p {
            font-size: 0.875rem;
            margin-top: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .prose code {
            font-size: 0.75rem;
        }

        .prose pre {
            padding: 0.75rem;
        }

        .prose pre code {
            font-size: 0.75rem;
        }

        .prose ul,
        .prose ol {
            padding-left: 1.25rem;
        }

        .prose li {
            margin-top: 0.25rem;
            margin-bottom: 0.25rem;
        }

        .prose blockquote {
            padding-left: 0.75rem;
        }

        .prose img {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .prose table th,
        .prose table td {
            padding: 0.5rem;
        }
    }
</style>
